<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>JPO vÃ½jezdy â€“ dashboard</title>

  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
  <header class="topbar">
    <div class="title">
      <div class="h1">JPO vÃ½jezdy â€“ dashboard</div>
      <div class="sub">Mapa â€¢ ikony udÃ¡lostÃ­ â€¢ statistiky â€¢ Å¾ebÅ™Ã­Äky (data posÃ­lÃ¡ ESP32)</div>
    </div>

    <div class="actions">
      <label class="chip">
        <input id="onlyActive" type="checkbox" />
        Jen aktivnÃ­
      </label>

      <select id="days" class="select">
        <option value="7">7 dnÃ­</option>
        <option value="30" selected>30 dnÃ­</option>
        <option value="90">90 dnÃ­</option>
      </select>

      <button id="btnExport" class="btn ghost">Export CSV</button>
      <button id="btnReload" class="btn">Obnovit</button>
      <div id="status" class="status">â€”</div>
    </div>
  </header>

  <main class="grid">
    <section class="card mapCard">
      <div class="cardHeader">
        <div class="cardTitle">Mapa vÃ½jezdÅ¯</div>
        <div class="legend">
          <span class="pill">ğŸ”¥ poÅ¾Ã¡r</span>
          <span class="pill">ğŸš— nehoda</span>
          <span class="pill">ğŸ› ï¸ technickÃ¡</span>
          <span class="pill">ğŸ§ zÃ¡chrana</span>
          <span class="pill">â“ jinÃ©</span>
          <span class="pill activePill">â— aktivnÃ­</span>
          <span class="pill closedPill">â— ukonÄeno</span>
        </div>
      </div>
      <div id="map"></div>
    </section>

    <section class="card">
      <div class="cardHeader">
        <div class="cardTitle">Statistika (<span id="daysLabel">30</span> dnÃ­)</div>
        <div class="cardHint">PoÄet vÃ½jezdÅ¯ po dnech</div>
      </div>
      <div class="chartBox">
        <canvas id="chartDays"></canvas>
      </div>
    </section>

    <section class="card">
      <div class="cardHeader">
        <div class="cardTitle">NejvÃ­c vÃ½jezdÅ¯ ve mÄ›stÄ›</div>
        <div class="cardHint">Top mÄ›sto (poÄtem)</div>
      </div>
      <div class="bigStat">
        <div id="topCityCount" class="big">â€”</div>
        <div id="topCityName" class="label">â€”</div>
      </div>
    </section>

    <section class="card">
      <div class="cardHeader">
        <div class="cardTitle">Å½ebÅ™Ã­Äek mÄ›st</div>
        <div class="cardHint">Top 10</div>
      </div>
      <ol id="topCities" class="list"></ol>
    </section>

    <section class="card">
      <div class="cardHeader">
        <div class="cardTitle">NejdelÅ¡Ã­ zÃ¡sahy</div>
        <div class="cardHint">Top 10 podle duration_min</div>
      </div>
      <ol id="longest" class="list"></ol>
    </section>

    <section class="card full">
      <div class="cardHeader">
        <div class="cardTitle">PoslednÃ­ udÃ¡losti</div>
        <div class="cardHint">Klikni pro otevÅ™enÃ­ detailu</div>
      </div>
      <div class="tableWrap">
        <table class="table">
          <thead>
            <tr>
              <th>Stav</th>
              <th>Typ</th>
              <th>NÃ¡zev</th>
              <th>MÃ­sto</th>
              <th>DÃ©lka</th>
            </tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>
      </div>
    </section>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="app.js"></script>
</body>
</html>
